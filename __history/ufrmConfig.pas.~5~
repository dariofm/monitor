unit ufrmConfig;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, cxGraphics, cxControls, cxLookAndFeels,
  cxLookAndFeelPainters, cxContainer, cxEdit, dxSkinsCore,IniFiles,
  dxSkinsDefaultPainters, Vcl.Menus, Vcl.StdCtrls, Vcl.Samples.Spin, cxButtons,
  cxTextEdit, cxMaskEdit, cxDropDownEdit, dxSkinscxPCPainter,
  cxPCdxBarPopupMenu, Vcl.ExtCtrls, cxPC;

type
  TfrmConfig = class(TForm)
    cxButton1: TcxButton;
    cxPageControl1: TcxPageControl;
    cxTabSheet1: TcxTabSheet;
    cxTabSheet2: TcxTabSheet;
    Label4: TLabel;
    Label1: TLabel;
    Label2: TLabel;
    cxBoxImpressora: TcxComboBox;
    SpinTempo: TSpinEdit;
    SpinEdit1: TSpinEdit;
    cxButton2: TcxButton;
    Shape1: TShape;
    procedure cxButton1Click(Sender: TObject);
    procedure cxButton2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmConfig: TfrmConfig;

implementation

{$R *.dfm}

uses ufrmPrincipal, udmDados;

procedure TfrmConfig.cxButton1Click(Sender: TObject);
var
  ArqINI: TIniFile;
begin
  // Cria o arquivo "Configuracao.ini" no mesmo diretório da aplicação, com o nome Config.ini
  ArqINI := TIniFile.Create(ExtractFilePath(Application.ExeName) + 'Configuracao.ini');
  try
    // Grava os dados no arquivo "Config.ini"
    ArqINI.WriteString('Parametro', 'Intervalo', SpinTempo.Text);
    ArqINI.WriteString('Parametro', 'Impressora', cxBoxImpressora.Text);
  finally
    // Liberar a referência do arquivo da memória
    ArqINI.Free;
  end;
  // Apresenta a mensagem

frmPrincipal.TimeMonitor.Interval := TRUNC(frmConfig.SpinTempo.Value * 1000);
end;

procedure TfrmConfig.cxButton2Click(Sender: TObject);
begin
  dmDados.frxReportCupom.DesignReport;
end;

end.
